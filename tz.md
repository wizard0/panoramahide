# Техническое задание.

## Административная панель

### Новости

#### Раздел новостей.

Перечень новостей в виде таблицы: 
- Дата создания,
- дата публикации, 
- Короткий заголовок, 
- издательство и или журнал и или раздел, 
- автор новости.

Возможность выборки по любым полям

#### При создании/редактировании новости

В нём должны присутствовать:
- Короткий заголовок новости
- Длинный заголовок новости
- Дескрипшн
- Аннотация
- Текстовой редактор для самой новости с возможностью быстрой загрузки картинок (может внедрить маркдаун?)
- Ссылка
- Издательство или журнал, или раздел к которому относится новость
- Автор новости (если будет указан)
- Дата публикации новости
- История изменений

### Статьи

#### Раздел статей.

Перечень статей в виде таблицы: 
- Дата создания, 
- дата публикации, 
- Короткий заголовок, 
- издательство и или журнал и или раздел, 
- автор статьи.
  
Возможность выборки по любым полям

#### Статьи создание/редактирование (не журнальными)

В нем должны присутствовать:
- Короткий заголовок статьи
- Длинный заголовок статьи
- Дескрипшн
- Аннотация
- Текстовой редактор для самой статьи с возможностью быстрой загрузки картинок (может внедрить маркдаун?)
- Ссылка
- Издательство или журнал, или раздел к которому относится статья
- Автор статьи (если будет указан)
- Дата публикации статьи
- История изменений

### Издательства

Перечень издательств ИД в виде таблицы:
- Наименование издательства, 
- ссылка, 
- краткое описание, 
- Гл редактор.
  
Возможность добавлять новые издательства

Возможность блокировать издательства

Возможность просмотра перечня журналов в конкретном издательстве

### Категории

Перечень категорий журналов, в виде таблицы: 
- Наименование категории, 
- ссылка, 
- краткое описание.
  
Возможность добавлять новые категории

Возможность блокировать категории

Возможность просмотра перечня журналов в конкретной категории

### Журналы

#### Журналы, выпускаемые ИД:

Перечень в виде таблицы:
- Наименование журнала, 
- Издательство, 
- Категория.

Кнопка создать журнал

Возможность скрыть подписку или сам выбранный журнал

Возможность выборки по любым из этих полей

#### Подразделы (вкладки) журнала при редактировании/создании:

##### Общая информация:
- Наименование (полное, краткое)
- Ссылка
- Статичная обложка
- Издательство(а) (выбирается из списка раздела «Издательства»). Выбирается общая
- Категория(и) (выбирается из списка раздела «Категории».
- Краткое описание
- ВАК
- ISSN
- Печатный индекс

##### Главный редактор и редакционный совет

Могут быть действующие и архивные, привязываются к выпуску

##### Выпуски. Электронные версии

Система для загрузки электронных версий отсортированная по годам и выпускам

Хранит информацию по выпускам (отображается по годам):
- Главный редактор
- Редакционный совет
- Статьи выпуска
- Загруженная электронная версия

##### Статьи

Раздел где можно быстро найти статью, а также где отображаются все статьи данного журнала

### График выхода и цены

#### Список журналов 

В виде таблицы:
- Наименование, 
- Периодичность выхода текущая, 
- Издательство, 
- Категория, 
- текущая цена год, 
- текущая цена полугодие, 
- текущая цена номер.
  
Список журналов берется из журналов.

Должны быть выборки по всем полям (там где цены выборка должна производиться по принципу либо точного соответствия, либо больше или равно)

#### При заходе внутрь подписки открывается цены на подписку на … журнал

- Вначале идёт год. 
- Можно добавлять при помощи + новый, указав какой именно год. Сортируются они от самого высокого к самому маленькому.
- При нажатии на созданный год ниже открывается выбор полугодия (тоже создаётся плюсиком и возможны значения Первое или второе)
- Далее указывается периодичность выхода в этом полугодии раз в … месяц(ев)
- Далее указывается первый месяц выхода
- После этого идут цены на подписку на текущее полугодие со следующими графами:
    - Год – цена на печатную, цена на электронную
    - Полгода - цена на печатную, цена на электронную
    - Месяц - цена на печатную, цена на электронную
    - Далее идёт кнопка установить цены
- После этого появляется график выхода журналов в виде заполненной таблицы. Его можно в дальнейшем править, если журналы будут вдруг сдваиваться.

График представляет из себя таблицу по месяцам полугодия. Если это 1е полугодие – начинается с января и оканчивается июнем, если 2е полугодие – начинается с июля и оканчивается декабрём

В каждом месяце указан номер журнала, а цветом выделяются месяца выхода этого журнала.
Чтобы сдвоить журнал, нужно выделить 2 номера и нажать сдвоить, или сделать отдельную графу вида «сдвоить Х номер с Y номером)

- Далее идёт кнопка «Сохранить изменения»

Здесь должна быть информация о выходе журнала в печать. По полугодиям, каждое полугодие — это таблица выхода.

Необходима возможность задания периодичности выхода, возможность сдваивания номеров.
Указание цены за печатную и электронную версию за номер, полгода, год в действующем полугодии.

### Подписка

Информация о подписчиках на электронные версии, на печатные версии через сайт

### Коды для партнёров

### Пользователи

#### Пользователи и группы пользователей

Группы пользователей
- Администратор, 
- Контент-менеджер, 
- Подписчик, 
- Промо, 
- Зарегистрированный пользователь.
  
Пользователи: 
- создать пользователя, 
- редактировать пользователя, 
- удалить пользователя, 
- заблокировать пользователя
  
#### Список пользователей: 

в виде таблицы 
- ФИО, 
- емайл, 
- группы. 
  
Возможность выборки по любому из полей, полям.

#### Создать пользователя, редактировать пользователя:

- ФИО, 
- емайл(он же логин), 
- пароль и повтор пароля (есть кнопка генерации пароля), 
- группы в которые входит пользователь, 
- адреса доставки: 
    - индекс, 
    - адрес, 
    - получатель. 
- закрепленные юр лица
    - Наименование, 
    - юр индекс/адрес, 
    - почт индекс/адрес, 
    - факт индекс/адрес, 
    - ИНН, 
    - ОГРН, 
    - Генеральный директор, 
    - главный бухгалтер.

### Коды доступа (промокоды)

#### Коды доступа к журналам

Система промокодов для орагизации пробного доступа к журналам для пользователей.

Промокод может быть 2х видов:
- Код на одно лицо для одной активации
- Общий код, который имеет либо несколько активаций (10, 15 итд) или неограниченное число активаций.

Код может давать доступ к одному журналу, или выбранной группе журналов. Как к определённому номер, так и последнему выложенному номеру, таки и к нескольким номерам, идущим подряд.

Список промокодов выводить в виде таблицы с графами:
- Код
- Дата создания
- Дата последней активации
- Статус
- К-во оставшихся активаций
- К-во активаций всего
- Список пользователей, активирующих код
- Перечень журналов, дающих доступ к коду.

#### Кнопка генерации кода(ов)

Открывается вкладку для генерации кодов:
- К-во кодов для генерации
- Общие ли коды да/нет
- Рекламная компания (выбрать из списка/создать новую)
- Список журналов, закрепляемых за кодами в виде таблицы с возможностью добавления, удаления Графы таблицы: 
    - Наименование журнала, 
    - Год выпуска, 
    - Номера.
- Кнопка генерации и выгрузки кодов в Ексель. 

Во время генерации кодов нужно учитывать: 
- наличие дубликатов, если при генерации создаётся код, который уже существует в системе, необходимо создать новый код.
- Код должен содержать только английские маленькие буквы и цифры

### Настройки

Различные настройки

### Заказы

#### Перечень заказов 

В виде таблицы:
- Номер заказа, 
- статус заказа 
    - оплачен
    - не оплачен
    - отменён 
- Кто заказал, 
- дата оплаты, 
- стоимость
  
#### Создание/редактирование заказа:

- Пользователь
- Тип (физ или юр лицо)
- Способ оплаты:
    - электронный платёж, 
    - банковская квитанция, 
    - счёт
- Статус оплаты
- Чего заказал, список в виде таблицы с возможностью добавлять и удалять значения:
    - Наименование, 
    - период подписки, 
    - тип:
        - печатная
        - электронная версия 
    - к-во (если печатная версия), 
    - цена (ставится из справочника цен), 
    - общая цена позиции (если указано к-во),
    - Общая сумма заказа,
    - адрес доставки.

#### При нажатии на позицию или добавление позиции вылезает модальное окно: 
- журнал, 
- таблица периодов подписки:
    - в ней № периода (ставится автомат.), 
    - тип подписки (эл или печ), 
    - к-во (устанавливается при печ), 
    - Дата начала подписки (в виде календаря месяцев), 
    - дата окончания подписки (там, где есть в виде календаря месяцев), 
    - кнопка добавить позицию, 
    - при ее нажатии под ней вылезает 3 варианта (и уже после выбора варианта добавляется строка):
        - год, 
        - полгода, 
        - неск. месяцев, 
        - месяц
        - кнопка убрать позицию
    - Документы: счёт (формируется на основании заказа)


### Работа модуля подписки.

Подписка бывает 2х видов: 
- печатная,
- электронная.
  
#### Печатная подписка.

Основана на дате выхода журналов в печать. Дозаказов нет, поэтому активным может быть только месяц, следующий текущему (и то до 20 числа текущего месяца). Т.е. Если скажем 2й номер журнала выходит в феврале, то заказать его можно только до 20 января.

#### В электронной подписке такого ограничения нет, доступ можно дать, когда угодно.

#### Алгоритм работы заказов:

1. Вариант. Клиент выбирает журнал и нажимает оформить подписку. Далее выбирает печатная или электронная версия.
    1. Если печатная версия. Смотрится текущая дата и исходя из нее выставляется начальный месяц подписки. Если текущая дата до 20 числа, то первый месяц подписки покупатель может установить следующим месяцем за текущим (например, если текущая дата 10 февраля, то клиент может выбрать начальный месяц март), если текущая дата 20 или выше, то подписчик может выбрать только следующий месяц за следующим месяцем (т.е. если 21 февраля, то первый месяц подписки клиент может выбрать только апрель).
    2.	Если электронная версия, то стартовый месяц можно выбрать исходя из всего текущего года. Т.е. с января по декабрь. Далее, клиент указывает к-во месяцев подписки от 1 до 12 и если это печатная версия, указывает к-во экземпляров.
2.	Вариант. Клиент выбрал архивный выпуск и хочет оформить подписку. В таком случае доступна только электронная версия подписки.

#### Формирование цены при заказе подписки:

Цена формируется в соответствии с ценами, заполненными в разделе «График выхода и цены».
1.	Если клиент выбрал 1 н номер, то цена устанавливается за выбранный период (например, если клиент заказал электронную подписку на 1 месяц с марта 2018 года, то берется цена на электронную версию журнала за 1е полугодие 2018 года.
2.	Если от 2-до 5 то на каждый журнал берётся также цена из таблицы, при этом могут быть 2 варианта цены:
    1.	Если цена на следующее полугодие ещё не установлена, а номер уже входит в него, то цена берётся из предыдущего полугодия. (например, клиент заказал 5 номеров журнала, выбрав первый месяц март, в таком случае цена за номера март, апрель, май и июнь берётся из первого полугодия, но, т.к. цена на второе полугодие ещё не установлена, то и июль берётся из цены этого полугодия.
    2.	Если цена на следующее полугодие уже установлена, и какой-то номер уже входит в него, то цена берётся из соответствующего полугодия. (например, клиент заказал 5 номеров журнала, выбрав первый месяц март, в таком случае цена за номера март, апрель, май и июнь берётся из первого полугодия, а цена на за июль берётся из цены второго полугодия.
3.	Если выбрано 6 месяцев: цена берётся из полугодия, в котором выбран первый месяц подписки (например, клиент заказывается с марта 6 номеров в 2018 году, то цена берётся за полгода 1го полугодия 2018 года)
4.	От 7 до 11 номеров.
    1.	Если цена на следующее полугодие, идущее за первым месяцем выбранной подписки клиентом ещё не установлена то цена образуется по текущему полугодию (например, клиент заказал 8 месяцев подписки, начиная с марта 2018г, значит берется цена подписки на полгода за 1е полугодие 2018 года (это включает номера март, апрель, май, июнь, июль, август), а на оставшиеся номера за сентябрь и октябрь цены устанавливается исходя из цены за 1 номер первого полугодия, т.к. на второе полугодие цена не стоит).
    2.	Если цена на следующее полугодие, идущее за первым месяцем выбранной подписки клиентом уже установлена то цена образуется по текущему полугодию за полгода, плюс за оставшиеся номера по цене следующего полугодия (например, клиент заказал 8 месяцев подписки, начиная с марта 2018г, значит берется цена подписки на полгода за 1е полугодие 2018 года (это включает номера март, апрель, май, июнь, июль, август), а на оставшиеся номера за сентябрь и октябрь цены устанавливается исходя из цены за 1 номер второго полугодия)
5.	12 номеров: цена устанавливается за полугодие, в которое вошёл месяц начала подписки за год.

Тоже самое касается журналов, которые выходят раз в 2, 3 месяца.
1.	При выходе раз в 2 месяца. Цены будут за 1 номер, за 3 номера (это полугодие), за 6 номеров (это год)
2.	При выходе раз в 3 месяца. Цены будут за 1 номер, за 2 номера (это полугодие), за 4 номера (это год)

Есть один момент, который необходимо учесть. Стартовый месяц на печатную версию подписки можно выбрать только, если на это полугодие (в которое этот стартовый месяц входит) установлены цены.

#### Формирование цены при заказе архивного номера:

- Если цена за номер соответствующего года и полугодия задана, то берётся там
- Если цена за номер соответствующего года и полугодия не указана, то берётся самая свежая цена, которая есть (скорее всего полугодия текущей даты)

### Партнёры


## Сайт

### Новости

### Статьи

### Журналы

### Издательства

### Личный кабинет

### Читалка
